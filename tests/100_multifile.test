#!/usr/bin/env tclsh

package require tcltest
namespace import tcltest::*

package require fileutil
package require struct::list

set testScript [file normalize [info script]]

#========================================

set THEME multifile

test load "Make sure it is loadable." {
    source [file dirname [file dirname $testScript]]/TclTaskRunner.tcl
} ""

test $THEME-create "create TclTaskRunner instance" {

    set debug [TclTaskRunner::default ::env(DEBUG) 0]
    TclTaskRunner dep -debug $debug -quiet [expr {! $debug}]

} ::dep

test $THEME-load "load *.tcltask" {
    
    foreach fn [glob -directory [file rootname $testScript] *.tcltask] {
        dep load $fn
    }
    
    dict size [[dep root] taskset get]
    
} 2
