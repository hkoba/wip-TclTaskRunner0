#!/usr/bin/env TclTaskRunner.tcl
# -*- mode: tcl; tab-width: 4; coding: utf-8 -*-

default target varZ dependsTasks {varX varY} check {
    info exists ::varZ
} action {
    incr ::actionCount(varZ)
    set ::varZ [expr {$::varX + $::varY}]
}

target varX check {
    info exists ::varX
} action {
    set ::varX [incr ::actionCount(varX)]
}

target varY check {
    info exists ::varY
} action {
    incr ::actionCount(varY)
    incr ::varY 10
}

method foobar args {
    list FOOBAR $args
}

method test-varA args {
    info exists ::varA
}

target ensure-varA check {
    $self test-varA
} action {
    set ::varA foo
}

